<html>
	<head>
		<title>Data.js Tests</title>
		
		<link rel="stylesheet" href="../vendor/ext.test/ext-3.2.1/ext-all.css" />
		<link rel="stylesheet" href="../vendor/ext.test/ext-3.2.1/ColumnNodeUI.css" />
	
		<!-- ExtJS, for the Testing Suite Reporter App -->
		<script type="text/javascript" src="../vendor/ext.test/ext-3.2.1/ext-base.js"></script>
		<script type="text/javascript" src="../vendor/ext.test/ext-3.2.1/ext-all.js"></script>
		<script type="text/javascript" src="../vendor/ext.test/ext-3.2.1/ColumnNodeUI.js"></script>
		
		<!-- YUI 3.4.1 Test -->
		<script type="text/javascript" src="http://yui.yahooapis.com/combo?3.4.1/build/yui-base/yui-base-min.js&3.4.1/build/oop/oop-min.js&3.4.1/build/event-custom-base/event-custom-base-min.js&3.4.1/build/event-base/event-base-min.js&3.4.1/build/event-simulate/event-simulate-min.js&3.4.1/build/event-custom-complex/event-custom-complex-min.js&3.4.1/build/substitute/substitute-min.js&3.4.1/build/json-stringify/json-stringify-min.js&3.4.1/build/test/test-min.js"></script>
		
		<!-- Ext.Test Harness -->
		<link rel="stylesheet" href="../vendor/ext.test/Ext.Test.min.css" />
		<script type="text/javascript" src="../vendor/ext.test/Ext.Test.min.js"></script>
		
		<!-- JSMockito Mocking Framework -->
		<script type="text/javascript" src="../vendor/jsmockito/jshamcrest.js"></script>
		<script type="text/javascript" src="../vendor/jsmockito/jsmockito.js"></script>
		
		
		<!-- Tests themselves -->
		<script type="text/javascript">
			// The namespace that all tests are under
			var tests = {};
		</script>
		<script type="text/javascript" src="unit/packageSuites.js"></script>
		<script type="text/javascript" src="integration/packageSuites.js"></script>
		
		
		<!-- Test Harness Setup -->
		<script type="text/javascript" src="../vendor/require/require.js"></script>
		<script type="text/javascript">
			/*global Ext */
		
			require.config( {
				baseUrl: '../',
				paths : {
					'jquery'     : 'vendor/jquery/jquery',
					'lodash'     : 'vendor/lodash/lodash',
					'Class'      : 'vendor/class/Class',
					'Observable' : 'vendor/observable/Observable',
					
					'data' : 'src',
					
					'unit'        : 'tests/unit',
					'integration' : 'tests/integration'
				}
			} );
			
			// Variables for PhantomJS runnner
			var runnerResults,
			    testsFailed = [];
			
			(function() {
				var startButton = new Ext.test.view.StartButton();
				
				var viewer = new Ext.test.view.ColumnTree( {
					region: 'center',
					title: document.title,
					height: 350,
					tbar: [
						startButton, 
						'->', 
						{
							xtype: 'testprogressbar',
							width: 500
						}
					]
				} );
				
				var logger = new Ext.test.view.Logger( {
					region: 'south',
					height: 200,
					split: true,
					minSize: 100
				} );
				
				
				require( [
					'unit/CollectionTest',
					'unit/ModelCacheTest',
					'unit/ModelTest',
					'unit/NativeObjectConverterTest',
					'unit/attribute/AttributeTest',
					'unit/attribute/BooleanTest',
					'unit/attribute/CollectionTest',
					'unit/attribute/DateTest',
					'unit/attribute/FloatTest',
					'unit/attribute/IntegerTest',
					'unit/attribute/ModelTest',
					'unit/attribute/ObjectTest',
					'unit/attribute/StringTest',
					'unit/persistence/RestProxyTest',
					'integration/Collection_with_Models',
					'integration/Model_with_ModelAttribute',
					'integration/Model_with_ModelCache',
					'integration/Model_with_NativeObjectConverter',
					'integration/Model_with_Nested_Collections',
					'integration/Model_with_Nested_Models',
					'integration/Model_with_ObjectAttribute',
					'integration/persistence/RestProxy_with_Nested_Models'
				], function() {
					Ext.onReady( function() {
						new Ext.Viewport( {
							layout : 'border',
							items : [ viewer, logger ]
						} );
						
						// Setup listener for PhantomJS runner
						Ext.test.Runner.addListener( {
							'fail' : function( runner, data ) {
								// global var
								testsFailed.push( "'" + data.testName + "' : failed.\n" + data.error.toString() );
							},
							
							'complete' : function( runner, data ) {
								// global var
								runnerResults = data.results;
							}
						} );
						
						// Begin the tests immediately
						startButton.runTests();
					} );
				} );
			} )();
		</script>
	</head>
	
	<body>
	</body>
</html>
